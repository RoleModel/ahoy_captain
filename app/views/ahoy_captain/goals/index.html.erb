<%= turbo_frame_tag :goals do %>
  <div class="flex flex-col min-h-[380px] w-full pt-4">
    <div class="flex text-sm font-bold text-base-content mb-4">
      <span class="grow">Goal</span>
      <span >Total events</span>
      <span class="w-8 ml-8 text-right">Unique events by visit</span>
      <span class="w-8 ml-8 text-right">Total visitors</span>
      <span class="w-8 ml-8 text-right">CR</span>
    </div>
    <div class='min-h-[420px]'>
      <div class="grow">
        <% if @presenter.goals.respond_to?(:each) && @presenter.goals.any? %>
          <% @presenter.goals.each do |item| %>
            <div class='leading-10 flex relative'>
              <progress class='progress-primary bg-base-100 h-8 grow' value="<%= item.uniques %>" max="<%= item.total_events %>">
              </progress>
              <span class="grow text-elipsis overflow-hidden absolute left-4 bottom-3 h-8 text-base-content">
              <%= item.name %>
            </span>
              <span class="w-8 ml-8 text-right">
              <%= render AhoyCaptain::TooltipComponent.new(amount: item.total_events) %>
            </span>
              <span class="w-8 ml-8 text-right">
              <%= render AhoyCaptain::TooltipComponent.new(amount: item.uniques) %>
            </span>
              <span class="w-8 ml-8 text-right">
              <%= render AhoyCaptain::TooltipComponent.new(amount: item.total_visitors) %>
            </span>

              <span class="w-8 ml-8 text-right">
                <%= item.conversion_rate %>%
              </span>
            </div>
          <% end %>
        <% else %>
          <p>No data found</p>
        <% end %>
      </div>
    </div>
  </div>


<% end %>
